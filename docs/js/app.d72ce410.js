(function(){"use strict";var t={5785:function(t,e,n){n.r(e),n.d(e,{default:function(){return A}});var o=n(3058),s=n(5223),i=n(6035),a=n(3333),r=n(6878),l=n(3165),u=n(7233),c=function(){var t=this,e=t._self._c;return e("div",[e(o.Z,[e(s.EB,[e(i.Z,{attrs:{fluid:""}},[t.isAuthorized?t._e():[t._v(" top ")],t.isAuthorized?[e(l.Z,{attrs:{"fixed-tabs":"","background-color":"primary",dark:""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},t._l(t.items,(function(n){return e(a.Z,{key:n.title},[t._v(" "+t._s(n.title)+" ")])})),1),e(u.Z,{model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},t._l(t.items,(function(t){return e(r.Z,{key:t.title},[e(i.Z,{staticClass:"my-2",attrs:{fluid:""}},[e(t.component,{tag:"component"})],1)],1)})),1)]:t._e()],2)],1)],1)],1)},d=[],h=n(6154);const m=h.Z.create({headers:{"content-type":"application/x-www-form-urlencoded"}});m.interceptors.response.use((t=>t.data.error?Promise.reject(t.data.error):Promise.resolve(t)),(t=>Promise.reject(t)));const p=t=>{m.defaults.baseURL=t};let f="";const g=t=>{f=t},v=t=>m.post("",{method:"GET",authToken:f,params:{yearMonth:t}}),Z=t=>m.post("",{method:"POST",authToken:f,params:{item:t}}),_=(t,e)=>m.post("",{method:"DELETE",authToken:f,params:{yearMonth:t,id:e}}),b=(t,e)=>m.post("",{method:"PUT",authToken:f,params:{beforeYM:t,item:e}});var y={setUrl:p,setAuthToken:g,fetch:v,add:Z,delete:_,update:b},P={name:"Home",mounted(){this.$nextTick((()=>{console.log("hello"),y.setUrl("")}))},data(){return{tab:null,items:[{title:"FL003",component:"MyFL003"},{title:"FL014",component:"MyFL014"}],is_loading:!1}},computed:{isAuthorized:function(){return this.$store.getters["isAuthorized"]}},methods:{}},k=P,w=n(1001),x=(0,w.Z)(k,c,d,!1,null,null,null),A=x.exports},6545:function(t,e,n){var o=n(144),s=n(1096),i=n(5378),a=n(8983),r=n(1828),l=n(6035),u=n(4192),c=n(5057),d=n(248),h=n(1908),m=n(1769),p=n(8228),f=n(3551),g=n(1969),v=n(5234),Z=n(2370),_=function(){var t=this,e=t._self._c;return e(s.Z,[t.isAuthorized?e(g.Z,{attrs:{app:""},model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[e(h.Z,[e(m.V9,{staticClass:"title"},[t._v(" GAS BANLY ")]),e(r.Z,{attrs:{icon:""},on:{click:function(e){t.drawer=!1}}},[e(c.Z,[t._v("mdi-chevron-left")])],1)],1),e(u.Z),e(d.Z,{attrs:{nav:""}},t._l(t.menus,(function(n){return e(h.Z,{key:n.title,attrs:{to:n.url}},[e(p.Z,[e(c.Z,[t._v(t._s(n.icon))])],1),e(m.km,[e(m.V9,[t._v(" "+t._s(n.title)+" ")])],1)],1)})),1)],1):t._e(),e(i.Z,{attrs:{app:"",color:"primary",dark:""}},[t.isAuthorized?e(a.Z,{on:{click:function(e){e.stopPropagation(),t.drawer=!t.drawer}}}):t._e(),e(Z.qW,[t._v(t._s(t.pageTitle)+" ")]),e(v.Z),e(r.Z,{attrs:{icon:"",to:"/"}},[e(c.Z,[t._v("mdi-home-outline")])],1),e(r.Z,{attrs:{text:"",to:"/settings"}},[e("span",{staticClass:"mr-2"},[t._v("Latest Release")]),e(c.Z,[t._v("mdi-cog")])],1)],1),e(f.Z,[e(l.Z,{attrs:{fluid:""}},[e("router-view")],1)],1)],1)},b=[],y={name:"App",beforeCreate(){console.log("beforeCreate"),this.$store.dispatch("loadSettings")},mounted(){this.$nextTick((()=>{console.log("mounted App.vue start"),console.log(this.$route.path),console.log(this.menus),this.changePageTitle(this.$route.path),console.log("mounted App.vue end")}))},computed:{isAuthorized:function(){return this.$store.getters["isAuthorized"]}},watch:{"$route.path":function(t,e){console.log({newVal:t,oldVal:e}),this.changePageTitle(t)}},data(){return{drawer:!1,menus:[...this.$store.state.menus],pageTitle:""}},methods:{changePageTitle(t){for(const e of this.menus)if(console.log(e),e.url===t){this.pageTitle=e.title;break}}}},P=y,k=n(1001),w=(0,k.Z)(P,_,b,!1,null,null,null),x=w.exports,A=n(8345),T=n(5785),S=n(5294),O=n(5251),$=function(){var t=this,e=t._self._c;return e("div",[e("h3",[t._v("アプリ設定")]),e(S.Z,{staticClass:"mx-4"},[e(O.Z,{attrs:{label:"API URL"},model:{value:t.settings.apiUrl,callback:function(e){t.$set(t.settings,"apiUrl",e)},expression:"settings.apiUrl"}})],1),e(S.Z,{staticClass:"mx-4"},[e(O.Z,{attrs:{label:"AUTH TOKEN"},model:{value:t.settings.authToken,callback:function(e){t.$set(t.settings,"authToken",e)},expression:"settings.authToken"}})],1),e(S.Z,{staticClass:"ma-4"},[e("p",[t._v("※設定はこのデバイスのみに保存されます。")]),e(v.Z),e(r.Z,{attrs:{color:"primary",loading:t.is_loading},on:{click:t.onSave}},[t._v(" 保存 ")])],1)],1)},z=[],L={name:"Settings",data(){return{settings:{...this.$store.state.settings},is_loading:!1}},methods:{async onSave(){this.$store.dispatch("saveSettings",{settings:this.settings}),this.notify_info("設定を保存しました"),await this.onAuthCheck()},async onAuthCheck(){try{this.is_loading=!0;const t={params:{}},e=await this.gasPost("AUTH_CHECK",t);"OK"==e.data.status&&(this.$store.dispatch("saveAuthorized",!0),this.notify_info("認証に成功しました"))}catch(t){console.log(t)}finally{this.is_loading=!1}}}},C=L,U=(0,k.Z)(C,$,z,!1,null,null,null),j=U.exports,F=n(629);o.ZP.use(F.ZP);var M=new F.ZP.Store({state:{isAuthorized:!1,settings:{apiUrl:"",authToken:""},menus:[{title:"Top",icon:"mdi-home-outline",url:"/"},{title:"設定",icon:"mdi-cog-outline",url:"/settings"}]},getters:{isAuthorized:t=>t.isAuthorized},mutations:{saveSettings(t,{settings:e}){t.settings={...e},localStorage.setItem("settings",JSON.stringify(e))},loadSettings(t){const e=JSON.parse(localStorage.getItem("settings"));e&&(t.settings=Object.assign(t.settings,e))},saveAuthorized(t,e){t.isAuthorized=e}},actions:{saveSettings({commit:t},{settings:e}){t("saveSettings",{settings:e})},loadSettings({commit:t}){t("loadSettings")},saveAuthorized({commit:t},e){t("saveAuthorized",e)}},modules:{}});o.ZP.use(A.ZP);const E=[{path:"/",name:"Home",component:T["default"],meta:{isPublic:!0}},{path:"/settings",name:"Settings",component:j,meta:{isPublic:!0}},{path:"/about",name:"about",component:()=>Promise.resolve().then(n.bind(n,5785))}],H=new A.ZP({routes:E});H.beforeEach(((t,e,n)=>{t.matched.some((t=>!t.meta.isPublic))&&!M.getters["isAuthorized"]?n({path:"/settings",query:{redirect:t.fullPath}}):n()}));var N=H,R=n(2250),G=n(160);const K=new R.Z({});o.ZP.use(R.Z),o.ZP.use(G.Z,{context:{vuetify:K}});var V,q,I,J,B=K,D=(n(6229),n(7330),n(2062),n(6154)),Y={methods:{createGasAxios(){const t=D.Z.create({headers:{Accept:"application/json","content-type":"application/x-www-form-urlencoded"}});return t.defaults.baseURL=this.$store.state.settings.apiUrl,t},gasPost(t,e){const n={...e,action:t,api_key:this.$store.state.settings.authToken};console.log({requestData:n});var o=new URLSearchParams;o.append("data",JSON.stringify(n));const s=this.createGasAxios().post("",o);return new Promise(((t,e)=>{s.then((e=>{console.log(e),t(e)})),s.catch((t=>{console.log(t),e(t)}))}))}}},W=Y,Q=(0,k.Z)(W,V,q,!1,null,null,null),X=Q.exports,tt={methods:{async msg_info(t){const e=await this.$dialog.confirm({text:t,title:"情報",actions:{false:"閉じる"},color:"primary"});return e},notify_info(t){this.$dialog.notify.info(t,{position:"bottom-right",timeout:3e3})}}},et=tt,nt=(0,k.Z)(et,I,J,!1,null,null,null),ot=nt.exports,st=n(9583),it=function(){var t=this,e=t._self._c;return e("div",[e(S.Z,[e(r.Z,{attrs:{color:"primary",loading:t.is_loading},on:{click:t.onFL003}},[t._v(" FL003 ")])],1),e(S.Z,[e(st.Z,{attrs:{headers:t.headers,items:t.items,loading:t.is_loading,dense:""}})],1)],1)},at=[],rt={data(){return{isAuthorized:this.$store.state.isAuthorized,is_loading:!1,items:[]}},computed:{headers(){return[{text:"時間",value:"log_dttm"},{text:"メッセージ",value:"log_message"}]}},methods:{async onFL003(){try{this.is_loading=!0,this.items=[];const t={params:{a:"bbcddd"}},e=await this.gasPost("FL003",t);"OK"==e.data.status&&(this.items=e.data.log)}finally{this.is_loading=!1}}}},lt=rt,ut=(0,k.Z)(lt,it,at,!1,null,null,null),ct=ut.exports,dt=function(){var t=this,e=t._self._c;return e("div",[t._v(" FL014 未作成 ")])},ht=[],mt={},pt=mt,ft=(0,k.Z)(pt,dt,ht,!1,null,null,null),gt=ft.exports;o.ZP.config.productionTip=!1,o.ZP.mixin(X),o.ZP.mixin(ot),o.ZP.component("MyFL003",ct),o.ZP.component("MyFL014",gt),new o.ZP({router:N,store:M,vuetify:B,render:t=>t(x)}).$mount("#app")}},e={};function n(o){var s=e[o];if(void 0!==s)return s.exports;var i=e[o]={exports:{}};return t[o].call(i.exports,i,i.exports,n),i.exports}n.m=t,function(){var t=[];n.O=function(e,o,s,i){if(!o){var a=1/0;for(c=0;c<t.length;c++){o=t[c][0],s=t[c][1],i=t[c][2];for(var r=!0,l=0;l<o.length;l++)(!1&i||a>=i)&&Object.keys(n.O).every((function(t){return n.O[t](o[l])}))?o.splice(l--,1):(r=!1,i<a&&(a=i));if(r){t.splice(c--,1);var u=s();void 0!==u&&(e=u)}}return e}i=i||0;for(var c=t.length;c>0&&t[c-1][2]>i;c--)t[c]=t[c-1];t[c]=[o,s,i]}}(),function(){n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,{a:e}),e}}(),function(){n.d=function(t,e){for(var o in e)n.o(e,o)&&!n.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){var t={143:0};n.O.j=function(e){return 0===t[e]};var e=function(e,o){var s,i,a=o[0],r=o[1],l=o[2],u=0;if(a.some((function(e){return 0!==t[e]}))){for(s in r)n.o(r,s)&&(n.m[s]=r[s]);if(l)var c=l(n)}for(e&&e(o);u<a.length;u++)i=a[u],n.o(t,i)&&t[i]&&t[i][0](),t[i]=0;return n.O(c)},o=self["webpackChunkbanly_gas_client"]=self["webpackChunkbanly_gas_client"]||[];o.forEach(e.bind(null,0)),o.push=e.bind(null,o.push.bind(o))}();var o=n.O(void 0,[998],(function(){return n(6545)}));o=n.O(o)})();
//# sourceMappingURL=app.d72ce410.js.map